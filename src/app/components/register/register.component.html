<section>
    <div class="section-layer">
    <div class="container">
            <h1 class="">Register <span>now</span></h1>
        <form [formGroup]="registerForm" (ngSubmit)="registerSubmit()">
        <div class="my-2">
            <label for="name">Name</label>
            <input
        [ngClass]="{
            'is-valid':!registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty),
            'is-invalid':registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)
            }"
            
            id="name" type="text" class="form-control" formControlName="name">

            @if (registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)) {
            <div class="alert alert-danger ">
                @if (registerForm.get('name')?.getError('required')) {
                <p class="m-0">name is required</p>
                }@else if (registerForm.get('name')?.getError('minlength')) {
                <p class="m-0">name should be more than or equal 3 chars</p>
                }@else if (registerForm.get('name')?.getError('maxlength')) {
                <p class="m-0">name should be less than or equal 20 chars</p>
                }
            </div>
            }
        </div>
        <div class="my-2">
            <label for="email">Email</label>
            <input id="email" type="email" class="form-control" formControlName="email">
            @if (registerForm.get('email')?.errors&& registerForm.get('email')?.touched) {

                <div class="alert alert-danger">
                    @if (registerForm.get('email')?.getError('required')) {
                <p class="m-0"> Email is required </p>
                    }@else if(registerForm.get('email')?.getError('email')){
                <p class="m-0">Email not valid</p>
                }

                </div>
            }
        </div>
        <div class="my-2">
            <label for="phone">Phone</label>
            <input id="phone" type="tel" class="form-control" formControlName="phone">
            @if (registerForm.get('phone')?.errors&& registerForm.get('phone')?.touched) {

                <div class="alert alert-danger">
                    @if (registerForm.get('phone')?.getError('required')) {
                <p class="m-0"> phone is required </p>
                    }@else if(registerForm.get('phone')?.getError('pattern')){
                <p class="m-0">phone not valid</p>
                }

                </div>
            }
        </div>
        <div class="my-2">
            <label for="password">Password</label>
            <input id="password" type="password" class="form-control" formControlName="password">
            @if (registerForm.get('password')?.errors&& registerForm.get('password')?.touched) {

                <div class="alert alert-danger">
                    @if (registerForm.get('password')?.getError('required')) {
                <p class="m-0"> password is required </p>
                    }@else if(registerForm.get('password')?.getError('pattern')){
                <p class="m-0">password not valid</p>
                }

                </div>
            }
        </div>
        <div class="my-2">
            <label for="rePassword">Confirm Password</label>
            <input id="rePassword" type="password" class="form-control" formControlName="rePassword">
            
            @if(registerForm.getError('mismatch') && registerForm.get('rePassword')?.touched)
            {
                <p class="alert alert-danger w-50 m-0">Password confirmation is incorrect</p>
            }
        </div>
        <button  class="btn-main" type="submit">register

            @if (isLoading) {
                <span><i class="fas fa-spin fa-spinner"></i></span>

            }
        </button>
        @if(msgError){
        <p class="alert alert-danger w-50 m-0">{{msgError}}</p>
        }
        </form>
    </div>
    </div>
</section>